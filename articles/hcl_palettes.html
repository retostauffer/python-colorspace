<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>HCL-Based Color Palettes – colorspace</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../logo-wide.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../installation.html"> 
<span class="menu-text">Installation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../getstarted.html"> 
<span class="menu-text">Get started</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../api.html"> 
<span class="menu-text">API</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../changelog.html"> 
<span class="menu-text">Changelog</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-articles" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Articles</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-articles">    
        <li>
    <a class="dropdown-item" href="../articles/color_spaces.html">
 <span class="dropdown-text">Color spaces</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/hcl_palettes.html">
 <span class="dropdown-text">HCL-Based Color Palettes</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/palette_visualization.html">
 <span class="dropdown-text">Palette Visualization and Assessment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/choose_palette.html">
 <span class="dropdown-text">App for Choosing Palettes Interactively</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/cvd.html">
 <span class="dropdown-text">Color Vision Deficiency Emulation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/manipulation_utilities.html">
 <span class="dropdown-text">Color Manipulation and Utilities</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/approximations.html">
 <span class="dropdown-text">Approximate Colors from Other Packages</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/classes_and_methods.html">
 <span class="dropdown-text">Classes and Methods</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/endrainbow.html">
 <span class="dropdown-text">Somewhere over the Rainbow</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/retostauffer/python-colorspace/tree/main"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://pypi.org"> 
<span class="menu-text"><img src="../python-logo.svg" class="img-fluid"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">HCL-Based Color Palettes</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Function references</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.utils.adjust_transparency.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">adjust_transparency</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.utils.check_hex_colors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">check_hex_colors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.choose_palette.choose_palette.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">choose_palette</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.colorlib.compare_colors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">compare_colors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.utils.contrast_ratio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">contrast_ratio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.cvd_emulator.cvd_emulator.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">cvd_emulator</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.utils.darken.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">darken</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.demos.demoplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">demoplot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.CVD.desaturate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">desaturate</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.CVD.deutan.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">deutan</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.hcl_palettes.divergingx_palettes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">divergingx_palettes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.utils.extract_transparency.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">extract_transparency</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.hcl_palettes.hcl_palettes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">hcl_palettes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.hclplot.hclplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">hclplot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.utils.lighten.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">lighten</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.utils.max_chroma.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">max_chroma</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.utils.mixcolor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">mixcolor</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.CVD.protan.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">protan</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.specplot.specplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">specplot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.swatchplot.swatchplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">swatchplot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.CVD.tritan.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">tritan</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Class references</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.colorlib.CIELAB.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CIELAB</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.colorlib.CIELUV.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CIELUV</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.colorlib.CIEXYZ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CIEXYZ</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.colorlib.HLS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HLS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.colorlib.HSV.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HSV</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.colorlib.RGB.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RGB</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.colorlib.colorlib.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">colorlib</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.palettes.diverging_hcl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">diverging_hcl</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.palettes.diverging_hsv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">diverging_hsv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.palettes.divergingx_hcl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">divergingx_hcl</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.palettes.hclpalettes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">hclpalettes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.palettes.heat_hcl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">heat_hcl</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.colorlib.hexcols.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">hexcols</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.palettes.palette.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">palette</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.colorlib.polarLAB.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">polarLAB</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.colorlib.polarLUV.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">polarLUV</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.palettes.qualitative_hcl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">qualitative_hcl</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.palettes.rainbow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">rainbow</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.palettes.rainbow_hcl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">rainbow_hcl</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.colorlib.sRGB.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">sRGB</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.palettes.sequential_hcl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">sequential_hcl</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../man/colorspace.palettes.terrain_hcl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">terrain_hcl</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../coverage/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Coverage report</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#qualitative-palettes" id="toc-qualitative-palettes" class="nav-link active" data-scroll-target="#qualitative-palettes">Qualitative palettes</a></li>
  <li><a href="#sequential-palettes-single-hue" id="toc-sequential-palettes-single-hue" class="nav-link" data-scroll-target="#sequential-palettes-single-hue">Sequential palettes (single-hue)</a></li>
  <li><a href="#sequential-palettes-multi-hue" id="toc-sequential-palettes-multi-hue" class="nav-link" data-scroll-target="#sequential-palettes-multi-hue">Sequential palettes (multi-hue)</a></li>
  <li><a href="#diverging-palettes" id="toc-diverging-palettes" class="nav-link" data-scroll-target="#diverging-palettes">Diverging palettes</a></li>
  <li><a href="#construction-details" id="toc-construction-details" class="nav-link" data-scroll-target="#construction-details">Construction details</a></li>
  <li><a href="#flexible-diverging-palettes" id="toc-flexible-diverging-palettes" class="nav-link" data-scroll-target="#flexible-diverging-palettes">Flexible diverging palettes</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/retostauffer/python-colorspace/issues" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    <div class="quarto-margin-footer"><div class="margin-footer-item">
<p>Documentation built with Python <code>3.11.9</code>, <a href="https://github.com/retostauffer/pyp2qmd">pyp2qmd</a> <code>0.1.0</code> and quarto <code>1.5.54</code> on GitHub.</p>
</div></div></div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">HCL-Based Color Palettes</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>As motivated in the previous article (<a href="../articles/color_spaces.html">Color Spaces: Classes and Methods</a>), the HCL space is particularly useful for specifying individual colors and color palettes, as its three axes match those of the human visual system very well. Therefore, the <strong>colorspace</strong> package provides three types of palettes based on the HCL model:</p>
<ul>
<li><em>Qualitative:</em> Designed for coding categorical information, i.e., where no particular ordering of categories is available and every color should receive the same perceptual weight.</li>
<li><em>Sequential:</em> Designed for coding ordered/numeric information, i.e., going from high to low (or vice versa).</li>
<li><em>Diverging:</em> Designed for coding ordered/numeric information around a central neutral value, i.e., where colors diverge from neutral to two extremes.</li>
</ul>
<p>The corresponding classes are <a href="../man/colorspace.palettes.qualitative_hcl.html"><code>qualitative_hcl</code></a>, <a href="../man/colorspace.palettes.sequential_hcl.html"><code>sequential_hcl</code></a>, and <a href="../man/colorspace.palettes.diverging_hcl.html"><code>diverging_hcl</code></a>. Their construction principles are exemplified in the following color swatches and explained in more detail below. The desaturated palettes bring out clearly that luminance differences (light-dark contrasts) are crucial for sequential and diverging palettes while qualitative palettes are balanced at the same luminance.</p>
<div>

</div>
<div id="c3f1556a" class="cell quarto-layout-panel" data-execution_count="1" data-layout-ncol="1">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><img src="hcl_palettes_files/figure-html/cell-2-output-1.png" class="img-fluid" width="1171"></p>
</div>
</div>
</div>
<p>More details about the construction of such palettes is provided in the following while the article on <a href="palette_visualization.html">Palette Visualization and Assessment</a> introduces further tools to better understand the properties of color palettes.</p>
<p>To facilitate obtaining good sets of colors, HCL parameter combinations that yield useful palettes are accessible by name. These can be listed using the function <a href="../man/colorspace.hcl_palettes.hcl_palettes.html"><code>hcl_palettes</code></a>.</p>
<div id="54807499" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> colorspace <span class="im">import</span> hcl_palettes</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>hcl_palettes()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>HCL palettes

Type:  Basic: Sequential (single-hue)
Names: Grays, Light Grays, Blues 2, Purples 2, Reds 2
       Greens 2

Type:  Basic: Sequential (multi-hue)
Names: Purple-Blue, Red-Purple, Red-Blue, Purple-Orange
       Blue-Yellow, Green-Yellow, Red-Yellow, Heat, Heat 2
       Terrain, Terrain 2, Viridis, Plasma, Dark Mint, Mint
       Emrld, BluYl, ag_GrnYl, Peach, PinkYl

Type:  Basic: Qualitative
Names: Pastel 1, Dark 2, Dark 3, Set 2, Set 3, Warm, Cold
       Harmonic, Dynamic

Type:  Basic: Diverging
Names: Blue-Red, Blue-Red 2, Blue-Yellow 2, Blue-Yellow 3
       Green-Orange, Cyan-Magenta, Tropic

Type:  Advanced: Sequential (single-hue)
Names: Blues 3, Purples 3, Reds 3, Greens 3, Oslo

Type:  Advanced: Sequential (multi-hue)
Names: Purple-Yellow, Inferno, Rocket, Mako, BluGrn, Teal
       TealGrn, Burg, BurgYl, RedOr, OrYel, Purp, PurpOr
       Sunset, Magenta, SunsetDark, ag_Sunset, BrwnYl, YlOrRd
       YlOrBr, OrRd, Oranges, YlGn, YlGnBu, Reds, RdPu, PuRd
       Purples, PuBuGn, PuBu, Greens, BuGn, GnBu, BuPu, Blues
       Lajolla, Turku, Hawaii, Batlow

Type:  Advanced: Diverging
Names: Blue-Red 3, Red-Green, Purple-Green, Purple-Brown
       Green-Brown, Broc, Cork, Vik, Berlin, Lisbon, Tofino</code></pre>
</div>
</div>
<p>To inspect the HCL parameter combinations for a specific palette simply include the palette name where upper- vs.&nbsp;lower-case, spaces, etc. are ignored for matching the label, e.g., <code>"set2"</code> matches <code>"Set 2"</code> as well as <code>"SET2"</code> will.</p>
<div id="9feb33e9" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> colorspace <span class="im">import</span> hcl_palettes</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>pal <span class="op">=</span> hcl_palettes().get_palette(name <span class="op">=</span> <span class="st">"SET2"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>pal</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>Palette Name: Set 2
        Type: Basic: Qualitative
        Inspired by: ...
         c1            60
         fixup       True
         gui            1
         h1             0
         h2         &lt;function &lt;lambda&gt; at 0x7f496b67fba0&gt;
         l1            70</code></pre>
</div>
</div>
<div id="902abf39" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>pal.get_settings()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>{'desc': '...',
 'h1': 0,
 'h2': &lt;function colorspace.palettes.&lt;lambda&gt;(n)&gt;,
 'c1': 60,
 'l1': 70,
 'fixup': True,
 'gui': 1}</code></pre>
</div>
</div>
<p>Calling <a href="../man/colorspace.palettes.qualitative_hcl.html"><code>qualitative_hcl</code></a>, <a href="../man/colorspace.palettes.sequential_hcl.html"><code>sequential_hcl</code></a>, and <a href="../man/colorspace.palettes.diverging_hcl.html"><code>diverging_hcl</code></a> respectively, will initialize an object of class <a href="../man/colorspace.palettes.hclpalettes.html"><code>hclpalette</code></a> defined by a series of parameters which specify the color palette. All parameters can either be specified “by hand” through the HCL parameters, an entire palette can be specified “by name”, or the name-based specification can be modified by a few HCL parameters. In case of the HCL parameters, either a vector-based specification such as <code>h = [0, 270]</code> or individual parameters <code>h1 = 0</code> and <code>h2 = 270</code> can be used.</p>
<p>To compute the actual color hex codes (representing sRGB coordinates), the method <code>.colors()</code> is used to return a list of <code>n</code> colors along the coordinates defined by parameters specified when constructing the object.</p>
<p>The first three of the following commands lead to equivalent output. The fourth command yields a modified set of colors (lighter due to a luminance of <code>80</code> instead of <code>70</code>).</p>
<div id="d86380c5" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> colorspace <span class="im">import</span> qualitative_hcl</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>qualitative_hcl()(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>['#E16A86', '#909800', '#00AD9A', '#9183E6']</code></pre>
</div>
</div>
<div id="4c156ba7" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>qualitative_hcl(h <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">270</span>])(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>['#E16A86', '#909800', '#00AD9A', '#9183E6']</code></pre>
</div>
</div>
<div id="f1f1ddb8" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>qualitative_hcl(h1 <span class="op">=</span> <span class="dv">0</span>, h2 <span class="op">=</span> <span class="dv">270</span>, c1 <span class="op">=</span> <span class="dv">80</span>, l1 <span class="op">=</span> <span class="dv">60</span>)(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>['#E16A86', '#909800', '#00AD9A', '#9183E6']</code></pre>
</div>
</div>
<div id="8f04de85" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>qualitative_hcl(l <span class="op">=</span> <span class="dv">80</span>).colors(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>['#FFA2BC', '#C6CE3E', '#00E4D0', '#C7BAFF']</code></pre>
</div>
</div>
<section id="qualitative-palettes" class="level2">
<h2 class="anchored" data-anchor-id="qualitative-palettes">Qualitative palettes</h2>
<p><a href="../man/colorspace.palettes.qualitative_hcl.html"><code>qualitative_hcl</code></a> distinguishes the underlying categories by a sequence of hues while keeping both chroma and luminance constant, to give each color in the resulting palette the same perceptual weight. Thus, <code>h</code> should be a pair of hues (or equivalently <code>h1</code> and <code>h2</code> can be used) with the starting and ending hue of the palette. Then, an equidistant sequence between these hues is employed, by default spanning the full color wheel (i.e., the full <code>360</code> degrees). Chroma <code>c</code> (or equivalently <code>c1</code>) and luminance <code>l</code> (or equivalently <code>l1</code>) are constants. Finally, fixup indicates whether colors with out-of-range coordinates should be corrected.</p>
<p>In the following graphic the available named palettes are shown. The first five palettes are close to the <a href="https://ColorBrewer.org">ColorBrewer.org</a> palettes of the same name <span class="citation" data-cites="color:Harrower+Brewer:2003">(<a href="#ref-color:Harrower+Brewer:2003" role="doc-biblioref">Harrower and Brewer 2003</a>)</span>. They employ different levels of chroma and luminance and, by default, span the full hue range. The remaining four palettes are taken from <span class="citation" data-cites="color:Ihaka:2003">Ihaka (<a href="#ref-color:Ihaka:2003" role="doc-biblioref">2003</a>)</span>. They are based on the same chroma (<code>50</code>) and luminance (<code>70</code>) but the hue is restricted to different intervals.</p>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> colorspace <span class="im">import</span> hcl_palettes</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>hcl_palettes(<span class="dv">5</span>, <span class="st">"Qualitative"</span>, plot <span class="op">=</span> <span class="va">True</span>, ncol <span class="op">=</span> <span class="dv">1</span>, figsize <span class="op">=</span> (<span class="dv">8</span>, <span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="5cf69741" class="cell quarto-layout-panel" data-execution_count="9" data-layout-ncol="1">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><img src="hcl_palettes_files/figure-html/cell-10-output-1.png" class="img-fluid" width="787"></p>
</div>
</div>
</div>
<p>When palettes are employed for shading areas in statistical displays (e.g., in bar plots, pie charts, or regions in maps), lighter colors (with moderate chroma and high luminance) such as “Pastel 1” or “Set 3” are typically less distracting. By contrast, when coloring points or lines, more flashy colors (with high chroma) are often required: On a white background a moderate luminance as in “Dark 2” or “Dark 3” usually works better while on a black/dark background the luminance should be higher as in “Set 2” for example.</p>
</section>
<section id="sequential-palettes-single-hue" class="level2">
<h2 class="anchored" data-anchor-id="sequential-palettes-single-hue">Sequential palettes (single-hue)</h2>
<p><a href="../man/colorspace.palettes.sequential_hcl.html"><code>sequential_hcl</code></a> codes the underlying numeric values by a monotonic sequence of increasing (or decreasing) luminance. Thus, the function’s <code>l</code> argument should provide a vector of length <span class="math inline">\(2\)</span> with starting and ending luminance (equivalently, <code>l1</code> and <code>l2</code> can be used). Without chroma (i.e., <code>c = 0</code>), this simply corresponds to a gray-scale palette, see “Grays” and “Light Grays” below.</p>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> colorspace <span class="im">import</span> hcl_palettes</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>hcl_palettes(<span class="dv">7</span>, <span class="st">"Sequential (single-hue)"</span>, plot <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>             ncol <span class="op">=</span> <span class="dv">1</span>, figsize <span class="op">=</span> (<span class="dv">8</span>, <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="5b16450f" class="cell quarto-layout-panel" data-execution_count="10" data-layout-ncol="1">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><img src="hcl_palettes_files/figure-html/cell-11-output-1.png" class="img-fluid" width="787"></p>
</div>
</div>
</div>
<p>All except the last are inspired by the <a href="http://ColorBrewer.org">ColorBrewer.org</a> palettes with the same base name <span class="citation" data-cites="color:Harrower+Brewer:2003">(<a href="#ref-color:Harrower+Brewer:2003" role="doc-biblioref">Harrower and Brewer 2003</a>)</span> but restricted to a single hue only. They are intended for a white/light background. The last palette (Oslo) is taken from the scientific color maps of <span class="citation" data-cites="color:Crameri:2018">Crameri (<a href="#ref-color:Crameri:2018" role="doc-biblioref">2018</a>)</span> and is intended for a black/dark background and hence the order is reversed starting from a light blue (not a light gray).</p>
<p>To distinguish many colors in a sequential palette it is important to have a strong contrast on the luminance axis, possibly enhanced by an accompanying pronounced variation in chroma. When only a few colors are needed (e.g., for coding an ordinal categorical variable with few levels) then a lower luminance contrast may suffice.</p>
</section>
<section id="sequential-palettes-multi-hue" class="level2">
<h2 class="anchored" data-anchor-id="sequential-palettes-multi-hue">Sequential palettes (multi-hue)</h2>
<p>To not only bring out extreme colors in a sequential palette but also better distinguish middle colors it is a common strategy to employ a sequence of hues. Thus, the basis of such a palette is still a monotonic luminance sequence as above (combined with a monotonic or triangular chroma sequence). But rather than using a single hue, an interval of hues in <code>h</code> (or beginning hue <code>h1</code> and ending hue <code>h2</code>) can be specified.</p>
<p><a href="../man/colorspace.palettes.sequential_hcl.html"><code>sequential_hcl</code></a> allows combined variations in hue (<code>h</code> and <code>h1</code>/<code>h2</code>, respectively), chroma (<code>c</code> and <code>c1</code>/<code>c2</code>/<code>cmax</code>, respectively), luminance (<code>l</code> and <code>l1</code>/<code>l2</code>, respectively), and power transformations for the chroma and luminance trajectories (power and <code>p1</code>/<code>p2</code>, respectively). This yields a broad variety of sequential palettes, including many that closely match other well-known color palettes. The plot below shows all the named multi-hue sequential palettes in <strong>colorspace</strong> which consist of various palettes created during the development of <strong>colorspace</strong>, e.g., by <span class="citation" data-cites="color:Zeileis+Hornik+Murrell:2009">Zeileis, Hornik, and Murrell (<a href="#ref-color:Zeileis+Hornik+Murrell:2009" role="doc-biblioref">2009</a>)</span> or <span class="citation" data-cites="color:Stauffer+Mayr+Dabernig:2015">Stauffer et al. (<a href="#ref-color:Stauffer+Mayr+Dabernig:2015" role="doc-biblioref">2015</a>)</span> among others.</p>
<p>In addition palettes are provided which closely match the palettes developed by <span class="citation" data-cites="color:Smith+VanDerWalt:2015">Smith and Van der Walt (<a href="#ref-color:Smith+VanDerWalt:2015" role="doc-biblioref">2015</a>)</span> for matplotlib, matching CARTO palettes <span class="citation" data-cites="color:CARTO">(<a href="#ref-color:CARTO" role="doc-biblioref">CARTO 2019</a>)</span>, <a href="https://ColorBrewer.org">ColorBrewer.org</a> palettes <span class="citation" data-cites="color:Harrower+Brewer:2003">(<a href="#ref-color:Harrower+Brewer:2003" role="doc-biblioref">Harrower and Brewer 2003</a>)</span>, and palettes closely matching the scientific palettes by <span class="citation" data-cites="color:Crameri:2018">Crameri (<a href="#ref-color:Crameri:2018" role="doc-biblioref">2018</a>)</span>.</p>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>hcl_palettes(<span class="dv">7</span>, <span class="st">"Sequential (multi-hue)"</span>, plot <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>             ncol <span class="op">=</span> <span class="dv">3</span>, figsize <span class="op">=</span> (<span class="dv">10</span>, <span class="dv">8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="279aa58c" class="cell quarto-layout-panel" data-execution_count="11" data-layout-ncol="1">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><img src="hcl_palettes_files/figure-html/cell-12-output-1.png" class="img-fluid" width="979"></p>
</div>
</div>
</div>
<p>Note that the palettes differ substantially in the amount of chroma and luminance contrasts. For example, many palettes go from a dark high-chroma color to a neutral low-chroma color (e.g., “Reds”, “Purples”, “Greens”, “Blues”) or even light gray (e.g., “Purple-Blue”). But some palettes also employ relatively high chroma throughout the palette (e.g., the viridis and many CARTO palettes). To emphasize the extremes the former strategy is typically more suitable while the latter works better if all values along the sequence should receive some more perceptual weight.</p>
</section>
<section id="diverging-palettes" class="level2">
<h2 class="anchored" data-anchor-id="diverging-palettes">Diverging palettes</h2>
<p><a href="../man/colorspace.palettes.diverging_hcl.html"><code>diverging_hcl</code></a> codes the underlying numeric values by a triangular luminance sequence with different hues in the left and in the right “arms” of the palette. Thus, it can be seen as a combination of two sequential palettes with some restrictions: (a) a single hue is used for each arm of the palette, (b) chroma and luminance trajectory are balanced between the two arms, (c) the neutral central value has zero chroma. To specify such a palette a vector of two hues h (or equivalently <code>h1</code> and <code>h2</code>), either a single chroma value <code>c</code> (or <code>c1</code>) or a vector of two chroma values <code>c</code> (or <code>c1</code> and <code>cmax</code>), a vector of two luminances <code>l</code> (or <code>l1</code> and <code>l2</code>), and power parameter(s) power (or <code>p1</code> and <code>p2</code>) are used. For more flexible diverging palettes without the restrictions above (and consequently more parameters) see the <a href="../man/colorspace.palettes.divergingx_hcl.html"><code>divergingx_hcl</code></a> palettes introduced below.</p>
<p>The plot below shows all such diverging palettes that have been named in <em>colorspace</em> available via the <a href="../man/colorspace.palettes.diverging_hcl.html"><code>diverging_hcl</code></a> class.</p>
<p>A series of these palettes have been developed for the <a href="https://colorspace.r-forge.r-project.org/"><em>R</em> colorspace</a> starting from <span class="citation" data-cites="color:Zeileis+Hornik+Murrell:2009">Zeileis, Hornik, and Murrell (<a href="#ref-color:Zeileis+Hornik+Murrell:2009" role="doc-biblioref">2009</a>)</span>, taking inspiration from various other palettes, including more balanced and simplified versions of several ColorBrewer.org palettes <span class="citation" data-cites="color:Harrower+Brewer:2003">(<a href="#ref-color:Harrower+Brewer:2003" role="doc-biblioref">Harrower and Brewer 2003</a>)</span> “Tropic” closely matches the palette of the same name from CARTO <span class="citation" data-cites="color:CARTO">(<a href="#ref-color:CARTO" role="doc-biblioref">CARTO 2019</a>)</span>, “Broc” to “Vik” and “Berlin” to “Tofino” closely match the scientific color maps of the same name by <span class="citation" data-cites="color:Crameri:2018">Crameri (<a href="#ref-color:Crameri:2018" role="doc-biblioref">2018</a>)</span>, where the first three are intended for a white/light background and the other three for a black/dark background.</p>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>hcl_palettes(<span class="dv">7</span>, <span class="st">"Diverging"</span>, plot <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>             ncol <span class="op">=</span> <span class="dv">1</span>, figsize <span class="op">=</span> (<span class="dv">8</span>, <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="2aefda42" class="cell quarto-layout-panel" data-execution_count="12" data-layout-ncol="1">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><img src="hcl_palettes_files/figure-html/cell-13-output-1.png" class="img-fluid" width="787"></p>
</div>
</div>
</div>
<p>When choosing a particular palette for a display similar considerations apply as for the sequential palettes. Thus, large luminance differences are important when many colors are used while smaller luminance contrasts may suffice for palettes with fewer colors etc.</p>
</section>
<section id="construction-details" class="level2">
<h2 class="anchored" data-anchor-id="construction-details">Construction details</h2>
<p>The three different types of palettes (qualitative, sequential, and diverging) are all constructed by combining three different types of trajectories (constant, linear, triangular) for the three different coordinates (hue H, chroma C, luminance L):</p>
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 28%">
<col style="width: 30%">
<col style="width: 21%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Type</strong></td>
<td><strong>H</strong></td>
<td><strong>C</strong></td>
<td><strong>L</strong></td>
</tr>
<tr class="even">
<td>Qualitative</td>
<td>Linear</td>
<td>Constant</td>
<td>Constant</td>
</tr>
<tr class="odd">
<td><div class="line-block">Sequential<br>
</div></td>
<td><div class="line-block">Constant (single-hue)<br>
<em>or</em> Linear (multi-hue)</div></td>
<td><div class="line-block">Linear (+ power)<br>
<em>or</em> Triangular (+ power)</div></td>
<td><div class="line-block">Linear (+ power)<br>
</div></td>
</tr>
<tr class="even">
<td><div class="line-block">Diverging<br>
</div></td>
<td><div class="line-block">Constant (2x)<br>
</div></td>
<td><div class="line-block">Linear (+ power)<br>
<em>or</em> Triangular (+ power)</div></td>
<td><div class="line-block">Linear (+ power)<br>
</div></td>
</tr>
</tbody>
</table>
<p>As pointed out initially in this article, luminance is probably the most important property for defining the type of palette. It is constant for qualitative palettes, monotonic for sequential palettes (linear or a power transformation), and uses two monotonic trajectories (linear or a power transformation) diverging from the same neutral value.</p>
<p>Hue trajectories are also rather intuitive and straightforward for the three different types of palettes. However, chroma trajectories are probably the most complicated and least obvious from the examples above. Hence, the exact mathematical equations underlying the chroma trajectories are given in the following (i.e., using the parameters <code>c1</code>, <code>c2</code>, <code>cmax</code>, and <code>p1</code>, respectively). Analogous equations apply for the other two coordinates.</p>
<p>The trajectories are functions of the intensity <span class="math inline">\(i \in [0,1]\)</span> where <span class="math inline">\(1\)</span> corresponds to the full intensity:</p>
<p><span class="math display">\[\begin{gather*}
\text{Constant}: c_1 \\

\text{Linear}: c_2 - (c_2 - c_1) \times i \\

\text{Triangular}: \begin{cases}
        c_2 - (c_2 - c_{max}) \times \frac{i}{j}  &amp; \text{if}~~~~i \le j \\
        c_{max} - (c_{max} - c_1) \times \frac{i - j}{1 - j} &amp; \text{else}
\end{cases}
\end{gather*}\]</span></p>
<p>where <span class="math inline">\(j\)</span> is the intensity at which <span class="math inline">\(c_{max}\)</span> is assumed. It is constructed such that the slope to the left is the negative of the slope to the right of <span class="math inline">\(j\)</span>:</p>
<p><span class="math display">\[\begin{gather*}
j = \Big(1 + \frac{|c_{max} - c_1|}{|c_{max} - c_2|}\Big)^{-1}
\end{gather*}\]</span></p>
<p>Instead of using a linear intensity <span class="math inline">\(i\)</span> going from <span class="math inline">\(1\)</span> to <span class="math inline">\(0\)</span>, one can replace <span class="math inline">\(i\)</span> with <span class="math inline">\(i ^{p_1}\)</span> in the equations above. This then leads to power-transformed curves that add or remove chroma more slowly or more quickly depending on whether the power parameter <span class="math inline">\(p_1\)</span> is <span class="math inline">\(&lt; 1\)</span> or <span class="math inline">\(&gt; 1\)</span>.</p>
<p>The three types of trajectories are also depicted below. Note that full intensity <span class="math inline">\(i = 1\)</span> is on the left and zero intensity <span class="math inline">\(i = 0\)</span> is on the right of each panel.</p>
<div>

</div>
<div id="f405f565" class="cell quarto-layout-panel" data-execution_count="13" data-layout-ncol="1">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><img src="hcl_palettes_files/figure-html/cell-14-output-1.png" class="img-fluid" width="950"></p>
</div>
</div>
</div>
<p>The concrete parameters in the plot above are:</p>
<ul>
<li>Constant: <code>c1 = 80</code>.</li>
<li>Linear: <code>c1 = 80</code>, <code>c2 = 10</code>, <code>p1 = 1</code> (solid) vs.&nbsp;<code>p1 = 1.6</code> (dashed).</li>
<li>Triangular: <code>c1 = 60</code>, <code>cmax = 80</code>, <code>c2 = 10</code>, <code>p1 = 1</code> (solid) vs.&nbsp;<code>p1 = 1.6</code> (dashed).</li>
</ul>
<p>Further discussion of these trajectories and how they can be visualized and assessed for a given color palette is provided in the article <a href="../articles/palette_visualization.html">Palette Visualization and Assessment</a>.</p>
<!--
## Registering your own palettes

TODO: Registering new palettes not yet implemented.
-->
</section>
<section id="flexible-diverging-palettes" class="level2">
<h2 class="anchored" data-anchor-id="flexible-diverging-palettes">Flexible diverging palettes</h2>
<p>The <a href="../man/colorspace.palettes.divergingx_hcl"><code>divergingx_hcl</code></a> class provides more flexible diverging palettes by simply calling <a href="../man/colorspace.palettes.sequential_hcl.html"><code>sequential_hcl</code></a> twice with prespecified sets of hue, chroma, and luminance parameters. Thus, it does not pose any restrictions that the two “arms” of the palette need to be balanced and also may go through a non-gray neutral color (typically light yellow). Consequently, the chroma/luminance paths can be rather unbalanced.</p>
<p>The plot below shows all such flexible diverging palettes that have been named in <em>colorspace</em>:</p>
<ul>
<li>“ArmyRose” to “Tropic” closely match the palettes of the same name from CARTO <span class="citation" data-cites="color:CARTO">(<a href="#ref-color:CARTO" role="doc-biblioref">CARTO 2019</a>)</span>.</li>
<li>“PuOr” to “Spectral” closely match the palettes of the same name from <a href="https://ColorBrewer.org">ColorBrewer.org</a> <span class="citation" data-cites="color:Harrower+Brewer:2003">(<a href="#ref-color:Harrower+Brewer:2003" role="doc-biblioref">Harrower and Brewer 2003</a>)</span>.</li>
<li>“Zissou 1” closely matches the palette of the same name from wesanderson <span class="citation" data-cites="color:wesanderson">(<a href="#ref-color:wesanderson" role="doc-biblioref">Ram and Wickham 2023</a>)</span>.</li>
<li>“Cividis” closely matches the palette of the same name from the viridis family <span class="citation" data-cites="color:viridis">(<a href="#ref-color:viridis" role="doc-biblioref">Garnier 2024</a>)</span>. Note that despite having two “arms” with blue vs. yellow colors and a low-chroma center color, this is probably better classified as a sequential palette due to the monotonic chroma going from dark to light. (See <a href="../articles/approximations.html">Approximating Palettes from Other Packages</a> for more details.)</li>
<li>“Roma” closely matches the palette of the same name by <span class="citation" data-cites="color:Crameri:2018">Crameri (<a href="#ref-color:Crameri:2018" role="doc-biblioref">2018</a>)</span>.</li>
</ul>
<div id="28a6a863" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> colorspace <span class="im">import</span> divergingx_palettes</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>divergingx_palettes(n <span class="op">=</span> <span class="dv">11</span>, ncol <span class="op">=</span> <span class="dv">1</span>, plot <span class="op">=</span> <span class="va">True</span>, figsize <span class="op">=</span> (<span class="dv">8</span>, <span class="dv">8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="hcl_palettes_files/figure-html/cell-15-output-1.png" width="787" height="787" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Typically, the more restricted <a href="../man/colorspace.palettes.diverging_hcl"><code>diverging_hcl</code></a> palettes should be preferred because they are more balanced. However, by being able to go through light yellow as the neutral color warmer diverging palettes are available.</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-color:CARTO" class="csl-entry" role="listitem">
CARTO. 2019. <span>“CARTOColors – Data-Driven Color Schemes.”</span> <a href="https://carto.com/carto-colors/">https://carto.com/carto-colors/</a>.
</div>
<div id="ref-color:Crameri:2018" class="csl-entry" role="listitem">
Crameri, Fabio. 2018. <span>“Geodynamic Diagnostics, Scientific Visualisation and <em>StagLab</em>&nbsp;3.0.”</span> <em>Geoscientific Model Development</em> 11 (6): 2541–62. <a href="https://doi.org/10.5194/gmd-11-2541-2018">https://doi.org/10.5194/gmd-11-2541-2018</a>.
</div>
<div id="ref-color:viridis" class="csl-entry" role="listitem">
Garnier, Simon. 2024. <em><em>Viridis</em>: Default Color Maps from <em>Matplotlib</em></em>. <a href="https://CRAN.R-project.org/package=viridis">https://CRAN.R-project.org/package=viridis</a>.
</div>
<div id="ref-color:Harrower+Brewer:2003" class="csl-entry" role="listitem">
Harrower, Mark A., and Cynthia A. Brewer. 2003. <span>“<em>ColorBrewer.org</em>: An Online Tool for Selecting Color Schemes for Maps.”</span> <em>The Cartographic Journal</em> 40: 27–37. <a href="http://ColorBrewer.org/">http://ColorBrewer.org/</a>.
</div>
<div id="ref-color:Ihaka:2003" class="csl-entry" role="listitem">
Ihaka, Ross. 2003. <span>“Colour for Presentation Graphics.”</span> In <em>Proceedings of the 3rd International Workshop on Distributed Statistical Computing, Vienna, Austria</em>, edited by Kurt Hornik, Friedrich Leisch, and Achim Zeileis. <a href="http://www.ci.tuwien.ac.at/Conferences/DSC-2003/Proceedings/">http://www.ci.tuwien.ac.at/Conferences/DSC-2003/Proceedings/</a>.
</div>
<div id="ref-color:wesanderson" class="csl-entry" role="listitem">
Ram, Karthik, and Hadley Wickham. 2023. <em><em>Wesanderson</em>: A <span>W</span>es <span>A</span>nderson Palette Generator</em>. <a href="https://CRAN.R-project.org/package=wesanderson">https://CRAN.R-project.org/package=wesanderson</a>.
</div>
<div id="ref-color:Smith+VanDerWalt:2015" class="csl-entry" role="listitem">
Smith, Nathaniel, and Stéfan Van der Walt. 2015. <span>“A Better Default Colormap for <em>Matplotlib</em>.”</span> In <em>SciPy 2015 – Scientific Computing with <span class="sans-serif">Python</span></em>. Austin. <a href="https://www.youtube.com/watch?v=xAoljeRJ3lU">https://www.youtube.com/watch?v=xAoljeRJ3lU</a>.
</div>
<div id="ref-color:Stauffer+Mayr+Dabernig:2015" class="csl-entry" role="listitem">
Stauffer, Reto, Georg J. Mayr, Markus Dabernig, and Achim Zeileis. 2015. <span>“Somewhere over the Rainbow: How to Make Effective Use of Colors in Meteorological Visualizations.”</span> <em>Bulletin of the American Meteorological Society</em> 96 (2): 203–16. <a href="https://doi.org/10.1175/BAMS-D-13-00155.1">https://doi.org/10.1175/BAMS-D-13-00155.1</a>.
</div>
<div id="ref-color:Zeileis+Hornik+Murrell:2009" class="csl-entry" role="listitem">
Zeileis, Achim, Kurt Hornik, and Paul Murrell. 2009. <span>“Escaping <span>RGB</span>land: Selecting Colors for Statistical Graphics.”</span> <em>Computational Statistics &amp; Data Analysis</em> 53: 3259–70. <a href="https://doi.org/10.1016/j.csda.2008.11.033">https://doi.org/10.1016/j.csda.2008.11.033</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/retostauffer/python-colorspace/issues" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>